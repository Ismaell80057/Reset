<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Reset SW</title>
</head>
<body>
  <h1>Reset service worker & cachesâ€¦</h1>
  <script>
  (async () => {
    if ('serviceWorker' in navigator) {
      const regs = await navigator.serviceWorker.getRegistrations();
      for (const r of regs) { await r.unregister(); }
    }
    if (window.caches) {
      const keys = await caches.keys();
      for (const k of keys) { await caches.delete(k); }
    }
    const p = document.createElement('p');
    p.textContent = 'OK. Recharge maintenant la page principale.';
    document.body.appendChild(p);
  })();
  </script>
</body>
</html>
